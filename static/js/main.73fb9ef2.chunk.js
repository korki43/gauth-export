(this["webpackJsonpgauth-export"]=this["webpackJsonpgauth-export"]||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),s=n.n(a),i=n(43),c=n.n(i),o=n(13),l=n(74),u=n(75),O=function(e){var t=e.otpURIs;return Object(r.jsx)(u.a,{className:"mb-3",children:t.map((function(e){return Object(r.jsx)(u.a.Item,{children:Object(r.jsx)("code",{children:e})})}))})},T=n(30),h=n.n(T),d=n(44),I=n(76);function b(e){return new Promise((function(t){var n=URL.createObjectURL(e),r=new Image;r.src=n,r.addEventListener("load",(function(){var e=document.createElement("canvas");e.height=r.height,e.width=r.width;var n=e.getContext("2d");n.drawImage(r,0,0),t(n.getImageData(0,0,r.width,r.height))}))}))}var _,g,m,j=n(45),p=n.n(j),f=n(17),P=n.n(f);function x(e){var t=new URL(e).searchParams.get("data");if(!t)throw new SyntaxError("Given URI contains no payload.");var n=new Uint8Array(P.a.util.base64.length(t));P.a.util.base64.decode(t,n,0);var r=P.a.parse('\nsyntax = "proto3";\n\nmessage MigrationPayload {\n  enum Algorithm {\n    ALGORITHM_UNSPECIFIED = 0;\n    ALGORITHM_SHA1 = 1;\n    ALGORITHM_SHA256 = 2;\n    ALGORITHM_SHA512 = 3;\n    ALGORITHM_MD5 = 4;\n  }\n\n  enum DigitCount {\n    DIGIT_COUNT_UNSPECIFIED = 0;\n    DIGIT_COUNT_SIX = 1;\n    DIGIT_COUNT_EIGHT = 2;\n  }\n\n  enum OtpType {\n    OTP_TYPE_UNSPECIFIED = 0;\n    OTP_TYPE_HOTP = 1;\n    OTP_TYPE_TOTP = 2;\n  }\n\n  message OtpParameters {\n    bytes secret = 1;\n    string name = 2;\n    string issuer = 3;\n    Algorithm algorithm = 4;\n    DigitCount digits = 5;\n    OtpType type = 6;\n    int64 counter = 7;\n  }\n\n  repeated OtpParameters otp_parameters = 1;\n  int32 version = 2;\n  int32 batch_size = 3;\n  int32 batch_index = 4;\n  int32 batch_id = 5;\n}').root.lookupType("MigrationPayload"),a=r.decode(n,n.byteLength);return r.toObject(a,{enums:Number,bytes:Uint8Array,defaults:!0})}!function(e){e[e.ALGORITHM_UNSPECIFIED=0]="ALGORITHM_UNSPECIFIED",e[e.ALGORITHM_SHA1=1]="ALGORITHM_SHA1",e[e.ALGORITHM_SHA256=2]="ALGORITHM_SHA256",e[e.ALGORITHM_SHA512=3]="ALGORITHM_SHA512",e[e.ALGORITHM_MD5=4]="ALGORITHM_MD5"}(_||(_={})),function(e){e[e.DIGIT_COUNT_UNSPECIFIED=0]="DIGIT_COUNT_UNSPECIFIED",e[e.DIGIT_COUNT_SIX=1]="DIGIT_COUNT_SIX",e[e.DIGIT_COUNT_EIGHT=2]="DIGIT_COUNT_EIGHT"}(g||(g={})),function(e){e[e.OTP_TYPE_UNSPECIFIED=0]="OTP_TYPE_UNSPECIFIED",e[e.OTP_TYPE_HOTP=1]="OTP_TYPE_HOTP",e[e.OTP_TYPE_TOTP=2]="OTP_TYPE_TOTP"}(m||(m={}));var E=n(14);function H(e){var t=e[0],n=new E.Secret({buffer:t.secret});return console.log(t,n.b32),e.map((function(e){var t=new E.Secret({buffer:e.secret});return e.type===m.OTP_TYPE_TOTP?new E.TOTP({issuer:e.issuer,algorithm:A(e.algorithm),digits:S(e.digits),label:e.name,secret:t}).toString():e.type===m.OTP_TYPE_HOTP?new E.HOTP({issuer:e.issuer,algorithm:A(e.algorithm),digits:S(e.digits),label:e.name,counter:e.counter,secret:t}).toString():"".concat(e.name,": No Type specified, couln't transform.")}))}function A(e){switch(e){case _.ALGORITHM_MD5:return"MD5";case _.ALGORITHM_SHA256:return"SHA256";case _.ALGORITHM_SHA512:return"SHA512";default:return"SHA1"}}function S(e){switch(e){case g.DIGIT_COUNT_EIGHT:return 8;default:return 6}}var v=function(e){var t=e.setOtpURIs,n=Object(a.useState)(null),s=Object(o.a)(n,2),i=s[0],c=s[1],l=Object(a.useState)(null),u=Object(o.a)(l,2),O=u[0],T=u[1];return Object(r.jsxs)(I.a,{children:[Object(r.jsx)(I.a.File,{custom:!0,className:O?"is-invalid":"mb-3",onChange:function(){var e=Object(d.a)(h.a.mark((function e(n){var r,a,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,T(null),!n.target.files||!n.target.files[0]){e.next=15;break}return c(n.target.files[0]),e.next=6,b(n.target.files[0]);case 6:if(r=e.sent,!(a=p()(r.data,r.width,r.height))){e.next=14;break}s=x(a.data),i=H(s.otpParameters),t(i),e.next=15;break;case 14:throw new Error("Couln't read QR code");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),T(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),label:(null===i||void 0===i?void 0:i.name)||"Upload your QR code here."}),Object(r.jsx)("div",{className:"invalid-feedback mb-3",children:O})]})},G=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(r.jsxs)("div",{className:"vh-100 d-flex flex-column justify-content-between",children:[Object(r.jsxs)(l.a,{className:"mt-4",children:[Object(r.jsx)("h1",{children:"Google Authenticator Migrator"}),Object(r.jsxs)("p",{className:"lead",children:["Transform your Google Authenticator Exports to standard ",Object(r.jsx)("i",{children:"otpauth"})," ","links which other OTP Managers can use."]}),Object(r.jsx)(v,{setOtpURIs:s}),n.length?Object(r.jsx)(O,{otpURIs:n}):null]}),Object(r.jsx)("footer",{className:"bg-light py-3 px-5 text-muted small",children:Object(r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(r.jsxs)("span",{children:["Copyright \xa9 2021 korki /"," ",Object(r.jsx)("a",{href:"https://github.com/korki43/gauth-export/blob/main/LICENSE",children:"MIT License"})]}),Object(r.jsx)("a",{href:"https://github.com/korki43/gauth-export",children:Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"gh-icon",viewBox:"0 0 16 16",children:Object(r.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})}),Object(r.jsx)("span",{children:"No liability or warranty granted."})]})})]})};n(72);c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(G,{})}),document.getElementById("root"))}},[[73,1,2]]]);