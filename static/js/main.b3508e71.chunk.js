(this["webpackJsonpgauth-export"]=this["webpackJsonpgauth-export"]||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r,a,i,s=n(5),c=n(0),o=n.n(c),l=n(43),u=n.n(l),O=n(10),T=n(74),h=n(75),d=n(17),I=n.n(d);!function(e){e[e.ALGORITHM_UNSPECIFIED=0]="ALGORITHM_UNSPECIFIED",e[e.ALGORITHM_SHA1=1]="ALGORITHM_SHA1",e[e.ALGORITHM_SHA256=2]="ALGORITHM_SHA256",e[e.ALGORITHM_SHA512=3]="ALGORITHM_SHA512",e[e.ALGORITHM_MD5=4]="ALGORITHM_MD5"}(r||(r={})),function(e){e[e.DIGIT_COUNT_UNSPECIFIED=0]="DIGIT_COUNT_UNSPECIFIED",e[e.DIGIT_COUNT_SIX=1]="DIGIT_COUNT_SIX",e[e.DIGIT_COUNT_EIGHT=2]="DIGIT_COUNT_EIGHT"}(a||(a={})),function(e){e[e.OTP_TYPE_UNSPECIFIED=0]="OTP_TYPE_UNSPECIFIED",e[e.OTP_TYPE_HOTP=1]="OTP_TYPE_HOTP",e[e.OTP_TYPE_TOTP=2]="OTP_TYPE_TOTP"}(i||(i={}));var b=n(14);function g(e){switch(e){case r.ALGORITHM_MD5:return"MD5";case r.ALGORITHM_SHA256:return"SHA256";case r.ALGORITHM_SHA512:return"SHA512";default:return"SHA1"}}function _(e){switch(e){case a.DIGIT_COUNT_EIGHT:return 8;default:return 6}}var m=function(e){var t=e.migrationUrl,n=Object(c.useState)([]),r=Object(O.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){var e=function(e){var t=e[0],n=new b.Secret({buffer:t.secret});return console.log(t,n.b32),e.map((function(e){var t=new b.Secret({buffer:e.secret});return e.type===i.OTP_TYPE_TOTP?new b.TOTP({issuer:e.issuer,algorithm:g(e.algorithm),digits:_(e.digits),label:e.name,secret:t}).toString():e.type===i.OTP_TYPE_HOTP?new b.HOTP({issuer:e.issuer,algorithm:g(e.algorithm),digits:_(e.digits),label:e.name,counter:e.counter,secret:t}).toString():"".concat(e.name,": No Type specified, couln't transform.")}))}(function(e){var t=new URL(e).searchParams.get("data");if(!t)throw new SyntaxError("Given URI contains no payload.");var n=new Uint8Array(I.a.util.base64.length(t));I.a.util.base64.decode(t,n,0);var r=I.a.parse('\nsyntax = "proto3";\n\nmessage MigrationPayload {\n  enum Algorithm {\n    ALGORITHM_UNSPECIFIED = 0;\n    ALGORITHM_SHA1 = 1;\n    ALGORITHM_SHA256 = 2;\n    ALGORITHM_SHA512 = 3;\n    ALGORITHM_MD5 = 4;\n  }\n\n  enum DigitCount {\n    DIGIT_COUNT_UNSPECIFIED = 0;\n    DIGIT_COUNT_SIX = 1;\n    DIGIT_COUNT_EIGHT = 2;\n  }\n\n  enum OtpType {\n    OTP_TYPE_UNSPECIFIED = 0;\n    OTP_TYPE_HOTP = 1;\n    OTP_TYPE_TOTP = 2;\n  }\n\n  message OtpParameters {\n    bytes secret = 1;\n    string name = 2;\n    string issuer = 3;\n    Algorithm algorithm = 4;\n    DigitCount digits = 5;\n    OtpType type = 6;\n    int64 counter = 7;\n  }\n\n  repeated OtpParameters otp_parameters = 1;\n  int32 version = 2;\n  int32 batch_size = 3;\n  int32 batch_index = 4;\n  int32 batch_id = 5;\n}').root.lookupType("MigrationPayload"),a=r.decode(n,n.byteLength);return r.toObject(a,{enums:Number,bytes:Uint8Array,defaults:!0})}(t).otpParameters);o(e)}),[t]),Object(s.jsx)(h.a,{className:"mb-3",children:a.map((function(e){return Object(s.jsx)(h.a.Item,{children:Object(s.jsx)("code",{children:e})})}))})},j=n(30),f=n.n(j),p=n(44),P=n(76);function x(e){return new Promise((function(t){var n=URL.createObjectURL(e),r=new Image;r.src=n,r.addEventListener("load",(function(){var e=document.createElement("canvas");e.height=r.height,e.width=r.width;var n=e.getContext("2d");n.drawImage(r,0,0),t(n.getImageData(0,0,r.width,r.height))}))}))}var E=n(45),H=n.n(E),A=function(e){var t=e.setMigrationUrl,n=Object(c.useState)(null),r=Object(O.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(null),l=Object(O.a)(o,2),u=l[0],T=l[1];return Object(s.jsxs)(P.a,{children:[Object(s.jsx)(P.a.File,{custom:!0,className:u?"is-invalid":"mb-3",onChange:function(){var e=Object(p.a)(f.a.mark((function e(n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,T(null),!n.target.files||!n.target.files[0]){e.next=13;break}return i(n.target.files[0]),e.next=6,x(n.target.files[0]);case 6:if(r=e.sent,!(a=H()(r.data,r.width,r.height))){e.next=12;break}t(a.data),e.next=13;break;case 12:throw new Error("Couln't read QR code");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),T(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),label:(null===a||void 0===a?void 0:a.name)||"Upload your QR code here."}),Object(s.jsx)("div",{className:"invalid-feedback mb-3",children:u})]})},S=function(){var e=Object(c.useState)(null),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(s.jsxs)("div",{className:"vh-100 d-flex flex-column justify-content-between",children:[Object(s.jsxs)(T.a,{className:"mt-4",children:[Object(s.jsx)("h1",{children:"Google Authenticator Migrator"}),Object(s.jsxs)("p",{className:"lead",children:["Transform your Google Authenticator Exports to standard ",Object(s.jsx)("i",{children:"otpauth"})," ","links which other OTP Managers can use."]}),Object(s.jsx)(A,{setMigrationUrl:r}),n&&Object(s.jsx)(m,{migrationUrl:n})]}),Object(s.jsx)("footer",{className:"bg-light py-3 px-5 text-muted small",children:Object(s.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(s.jsxs)("span",{children:["Copyright \xa9 2021 korki /"," ",Object(s.jsx)("a",{href:"https://github.com/korki43/gauth-export/blob/main/LICENSE",children:"MIT License"})]}),Object(s.jsx)("a",{href:"https://github.com/korki43/gauth-export",children:Object(s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"gh-icon",viewBox:"0 0 16 16",children:Object(s.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})}),Object(s.jsx)("span",{children:"No liability or warranty granted."})]})})]})};n(72);u.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(S,{})}),document.getElementById("root"))}},[[73,1,2]]]);